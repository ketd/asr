{
  "schema_version": "1.0",
  "id": "asr-prefab",
  "version": "0.1.0",
  "name": "ASR 语音识别预制件",
  "description": "将音频文件（wav/mp3）转换为文字，支持中文、英文、粤语、日语、韩语等多种语言",
  "author": "ketd",
  "github_url": "https://github.com/ketd/asr",
  "tags": [
    "asr",
    "speech-recognition",
    "audio-to-text",
    "speech-to-text",
    "voice-recognition"
  ],
  "entry_point": "src/main.py",
  "dependencies_file": "pyproject.toml",
  "functions": [
    {
      "name": "audio_to_text",
      "description": "将音频文件转换为文字（ASR - 自动语音识别），支持多种语言和音频格式",
      "files": {
        "input": {
          "type": "array",
          "items": {
            "type": "InputFile"
          },
          "minItems": 1,
          "maxItems": 10,
          "description": "输入音频文件（支持 .wav 和 .mp3 格式，推荐 16KHz 采样率）",
          "required": true
        }
      },
      "parameters": [
        {
          "name": "lang",
          "type": "string",
          "description": "音频内容的语言",
          "required": false,
          "default": "auto",
          "enum": ["auto", "zh", "en", "yue", "ja", "ko", "nospeech"]
        },
        {
          "name": "keys",
          "type": "string",
          "description": "每个音频文件的名称，用逗号连接（可选，如果为空则使用文件名）",
          "required": false,
          "default": ""
        }
      ],
      "returns": {
        "type": "object",
        "description": "包含转录结果的对象",
        "properties": {
          "success": {
            "type": "boolean",
            "description": "操作是否成功"
          },
          "results": {
            "type": "array",
            "description": "转录结果列表（成功时）",
            "optional": true,
            "items": {
              "type": "object"
            }
          },
          "total_files": {
            "type": "integer",
            "description": "处理的音频文件总数（成功时）",
            "optional": true
          },
          "language": {
            "type": "string",
            "description": "使用的语言设置（成功时）",
            "optional": true
          },
          "api_url": {
            "type": "string",
            "description": "ASR 服务 API 地址（成功时）",
            "optional": true
          },
          "error": {
            "type": "string",
            "description": "错误信息（失败时）",
            "optional": true
          },
          "error_code": {
            "type": "string",
            "description": "错误代码（失败时）",
            "optional": true,
            "enum": [
              "INVALID_LANGUAGE",
              "NO_INPUT_DIR",
              "NO_AUDIO_FILES",
              "FILE_OPEN_ERROR",
              "ASR_API_ERROR",
              "TIMEOUT",
              "CONNECTION_ERROR",
              "REQUEST_ERROR",
              "PARSE_ERROR",
              "UNEXPECTED_ERROR"
            ]
          },
          "details": {
            "type": "string",
            "description": "错误详情（失败时可选）",
            "optional": true
          }
        }
      }
    }
  ],
  "execution_environment": {
    "cpu": "500m",
    "memory": "256Mi"
  }
}
