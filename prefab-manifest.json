{
  "schema_version": "1.0",
  "id": "asr-prefab",
  "version": "0.2.1",
  "name": "ASR 语音识别预制件",
  "description": "将音频文件（wav/mp3）转换为文字，支持中文、英文、粤语、日语、韩语等多种语言",
  "author": "ketd",
  "github_url": "https://github.com/ketd/asr",
  "tags": [
    "asr",
    "speech-recognition",
    "audio-to-text",
    "speech-to-text",
    "voice-recognition"
  ],
  "entry_point": "src/main.py",
  "dependencies_file": "pyproject.toml",
  "functions": [
    {
      "name": "audio_to_text",
      "description": "将音频文件转换为文字（ASR - 自动语音识别），支持多种语言和音频格式，一次处理一个文件",
      "files": {
        "input": {
          "type": "array",
          "items": {
            "type": "InputFile"
          },
          "minItems": 1,
          "maxItems": 1,
          "description": "输入音频文件（支持 .wav 和 .mp3 格式，推荐 16KHz 采样率，一次只能上传1个文件）",
          "required": true
        }
      },
      "parameters": [
        {
          "name": "lang",
          "type": "string",
          "description": "音频内容的语言",
          "required": false,
          "default": "auto",
          "enum": ["auto", "zh", "en", "yue", "ja", "ko", "nospeech"]
        }
      ],
      "returns": {
        "type": "object",
        "description": "转录结果或错误信息",
        "properties": {
          "text": {
            "type": "string",
            "description": "转录的文本内容（成功时）",
            "optional": true
          },
          "filename": {
            "type": "string",
            "description": "处理的文件名（成功时）",
            "optional": true
          },
          "language": {
            "type": "string",
            "description": "使用的语言设置（成功时）",
            "optional": true
          },
          "raw_text": {
            "type": "string",
            "description": "原始文本（包含标记，成功时可选）",
            "optional": true
          },
          "clean_text": {
            "type": "string",
            "description": "清理后的文本（成功时可选）",
            "optional": true
          },
          "error": {
            "type": "object",
            "description": "错误信息（失败时）",
            "optional": true,
            "properties": {
              "message": {
                "type": "string",
                "description": "错误描述"
              },
              "code": {
                "type": "string",
                "description": "错误代码",
                "enum": [
                  "INVALID_LANGUAGE",
                  "NO_INPUT_DIR",
                  "NO_AUDIO_FILES",
                  "FILE_ERROR",
                  "ASR_API_ERROR",
                  "TIMEOUT",
                  "CONNECTION_ERROR",
                  "REQUEST_ERROR",
                  "PARSE_ERROR",
                  "UNEXPECTED_ERROR"
                ]
              }
            }
          }
        }
      }
    }
  ],
  "execution_environment": {
    "cpu": "500m",
    "memory": "256Mi"
  }
}
